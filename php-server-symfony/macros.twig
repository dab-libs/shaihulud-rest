{% macro actionTypeName(request) %}
{{   request.operationId|pascalCase ~ 'ActionInterface' }}
{% endmacro %}

{% macro controllerTypeName(request) %}
{{   request.operationId|pascalCase ~ 'Controller' }}
{% endmacro %}

{% macro methodName(request) %}
{{   request.operationId }}
{% endmacro %}

{% macro parameterTypeName(schema, name, parentName) %}
{%   if schema contains '$ref' %}
{%     set typeName = schema['$ref'] | replaceAll('#/components/schemas/(\w+)', '\u$1') %}
{%   elseif schema.type == 'string' %}
{%     set typeName = 'string' %}
{%   elseif schema.type == 'integer' %}
{%     set typeName = 'int' %}
{%   elseif schema.type == 'number' %}
{%     set typeName = 'float' %}
{%   elseif schema.type == 'boolean' %}
{%     set typeName = 'bool' %}
{%   elseif schema.type == 'array' %}
{%     set typeName = 'array' %}
{%   elseif schema.type == 'object' %}
{%     set typeName = parentName ~ ' ' ~ name | pascalCase %}
{%   endif %}
{{   typeName }}
{% endmacro %}

{% macro operationsType(schema, name, parentName) %}
{{   parameterTypeName(schema, name, parentName) | upperCaseFirst ~ 'Operations' }}
{% endmacro %}

{% macro literal(value) %}
{{   value is null ? 'null' : value | quoteString("'") | raw }}
{% endmacro %}

{% macro defaultValueLiteral(schema) %}
{%   if schema contains '$ref' %}
{%     set value = null %}
{%   else %}
{%     set value = schema.default %}
{%   endif %}
{{   literal(value) }}
{% endmacro %}

{% macro stringOptions(required, schema, indent) %}
[
{{ indent }}  'required' => {{ literal(required) }},
{{ indent }}  'maxLength' => {{ literal(schema.maxLength) }},
{{ indent }}  'minLength' => {{ literal(schema.minLength) }},
{{ indent }}]{% endmacro %}

{% macro numberOptions(required, schema, indent) %}
[
{{ indent }}  'required' => {{ literal(required) }},
{{ indent }}  'maximum' => {{ literal(schema.maximum) }},
{{ indent }}  'exclusiveMaximum' => {{ literal(schema.exclusiveMaximum) }},
{{ indent }}  'minimum' => {{ literal(schema.minimum) }},
{{ indent }}  'exclusiveMinimum' => {{ literal(schema.exclusiveMinimum) }},
{{ indent }}  'multipleOf' => {{ literal(schema.multipleOf) }},
{{ indent }}]{% endmacro %}

{% macro boolOptions(required, schema, indent) %}
['required' => {{ literal(required) }} ]{% endmacro %}

{% macro typeOptions(required, schema, indent) %}
{%   if schema contains '$ref' %}
{%     set typeName = schema['$ref'] | replaceAll('#/components/schemas/(\w+)', '\u$1') %}
{%   elseif schema.type == 'string' %}
{%     set options = stringOptions(required, schema, indent) %}
{%   elseif schema.type == 'integer' %}
{%     set options = numberOptions(required, schema, indent) %}
{%   elseif schema.type == 'number' %}
{%     set options = numberOptions(required, schema, indent) %}
{%   elseif schema.type == 'boolean' %}
{%     set options = boolOptions(required, schema, indent) %}
{%   elseif schema.type == 'array' %}
{%     set typeName = 'array' %}
{%   elseif schema.type == 'object' %}
{%     set typeName = classNameForObject %}
{%   endif %}
{{   options }}{% endmacro %}

{% macro validationOptions2(required, schema, indent) %}
new ValidationOptions(
{{ indent }}  {{ literal(required) }},    // required
{{ indent }}  {{ literal(schema.default) }},    // default
{{ indent }}  {{ literal(schema['$ref']) }},    // ref
{{ indent }}  {{ literal(schema.multipleOf) }},    // multipleOf
{{ indent }}  {{ literal(schema.maximum) }},    // maximum
{{ indent }}  {{ literal(schema.exclusiveMaximum) }},    // exclusiveMaximum
{{ indent }}  {{ literal(schema.minimum) }},    // minimum
{{ indent }}  {{ literal(schema.exclusiveMinimum) }},    // exclusiveMinimum
{{ indent }}  {{ literal(schema.maxLength) }},    // maxLength
{{ indent }}  {{ literal(schema.minLength) }},    // minLength
{{ indent }}  {{ literal(schema.pattern) }},    // pattern
{{ indent }}  {{ literal(schema.maxItems) }},    // maxItems
{{ indent }}  {{ literal(schema.minItems) }},    // minItems
{{ indent }}  {{ literal(schema.uniqueItems) }}    // uniqueItems
{{ indent }}){% endmacro %}
